C51 COMPILER V9.60.0.0   ____________                                                      07/02/2020 17:55:07 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE ____________
OBJECT MODULE PLACED IN .\Objects\∂® ±÷–∂œÕÍ≥….obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE ∂® ±÷–∂œÕÍ≥….c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listi
                    -ngs\∂® ±÷–∂œÕÍ≥….lst) TABS(2) OBJECT(.\Objects\∂® ±÷–∂œÕÍ≥….obj)

line level    source

   1          #include <reg52.h>
   2          
   3          unsigned long beats = 0;
   4          
   5          void StartMotor(unsigned long angle);
   6          
   7          void main()
   8          {
   9   1        //‰∏≠Êñ≠
  10   1        EA = 1;                 //ÂºÄÊîæÊÄª‰∏≠Êñ≠
  11   1        ET0 = 1;                //ÂÖÅËÆ∏T0‰∏≠Êñ≠
  12   1        
  13   1        //ÂÆöÊó∂Âô®ÔºàÂõ†‰∏∫ÁÇπÂáªÂêØÂä®Âà∑Êñ∞ËäÇÊãçË¶ÅÊ±ÇÊó∂Èó¥>1.8msÔºåÊâÄ‰ª•Áî®ÂÆöÊó∂Âô®ÊØè2msÂà∑Êñ∞‰∏ÄÊ¨°ËäÇÊ
             -ãçÔºâ
  14   1        TR0 = 1;                //ÂÖÅËÆ∏TR0ËÆ°Êó∂
  15   1        TMOD = 0x01;            
  16   1        TH0 = (65536-2000)/256; //2ms
  17   1        TL0 = (65536-2000)%256; 
  18   1        
  19   1        StartMotor(360*2+180);  //ËΩ¨‰∏§ÂúàÂçä
  20   1        while(1);
  21   1      }
  22          
  23          void StartMotor(unsigned long angle)  //angleÔºöËßíÂ∫¶
  24          {
  25   1        //ÈáçË¶ÅÔºÅÂõ†‰∏∫angleÁ±ªÂûãÔºåÊâÄ‰ª•Ë¶ÅÂú®Êìç‰ΩúangleÁöÑÊó∂ÂÄôÂºÄÊîæ/ÂÖ≥Èó≠‰∏≠Êñ≠
  26   1        EA = 0;
  27   1        beats = (angle*4076)/360;         //ËßíÂ∫¶ËΩ¨‰∏∫ÊãçÊï∞
  28   1        EA = 1;
  29   1      }
  30          
  31          void interruptTimer0()  interrupt 1
  32          {
  33   1        unsigned char tmp;
  34   1        static unsigned char index = 0;
  35   1        unsigned char code BeatCode[8] = {
  36   1          0x0E, 0x0C, 0x0D, 0x09, 0x0B, 0x03, 0x07, 0x06
  37   1        };
  38   1        
  39   1        TH0 = (65536-2000)/256;
  40   1        TL0 = (65536-2000)%256;
  41   1        if (beats != 0)
  42   1        {
  43   2          tmp = P1;
  44   2          tmp = tmp & 0xF0;
  45   2          tmp = tmp | BeatCode[index];
  46   2          P1 = tmp;
  47   2          index++;
  48   2          index = index & 0x07;
  49   2          beats--;
  50   2        }
  51   1        else  //beats‰∏∫0ÔºåÂÖ≥Èó≠
  52   1        {
  53   2          P1 = P1 | 0x0F;
C51 COMPILER V9.60.0.0   ____________                                                      07/02/2020 17:55:07 PAGE 2   

  54   2        }
  55   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    207    ----
   CONSTANT SIZE    =      8    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
